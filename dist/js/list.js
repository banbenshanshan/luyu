"use strict";function listx(e,a,t){console.log(t),$.ajax({type:"get",url:t,async:!0,data:{page:e,qty:a},success:function(e){console.log(e);var a=JSON.parse(e);console.log(a);for(var t="",n=0;n<a.length;n++)t+='<a href="../html/details.html?'+a[n].id+'"><li><img src="../'+a[n].img+'"/><p>'+a[n].content+"</p><h3>￥"+a[n].price+"</h3></li></a>";$("#olist").html(t)}})}$page=1,$qty=10,listx($page,$qty,"../api/page.php");var list=document.getElementById("olist"),opage=document.getElementById("page"),spans=opage.getElementsByTagName("span"),xhr=new XMLHttpRequest;xhr.open("GET","../api/page.php?page=1&qty=10",!0),xhr.send(),xhr.onreadystatechange=function(){if(4==xhr.readyState&&200==xhr.status){var e=JSON.parse(xhr.responseText),a=e.list,t="";for($i=0;$i<a.length;$i++)t+='<a href="../html/details.html?'+a[$i].id+'"><li><img src="../'+a[$i].img+'"/><p>'+a[$i].content+"</p><h3>￥"+a[$i].price+"</h3></li></a>";$("#olist").html(t);for(var n=Math.ceil(e.total/10),r=(t="",0);r<n;r++)t+="<span>"+(r+1)+"</span>";opage.innerHTML=t,page.children[0].className="active"}};var now=1;function update(){prev.style.color=1!=now?"#000":"#ccc",next.style.color=5!=now?"#000":"#ccc"}function creat(){var e=JSON.parse(xhr.responseText).list;console.log(e);for(var a="",t=0;t<e.length;t++)a+='<a href="../html/details.html?'+e[t].id+'"><li><img src="../'+e[t].img+'"/><p>'+e[t].content+"</p><h3>￥"+e[t].price+"</h3></li></a>";$("#olist").html(a)}opage.onclick=function(e){if("span"==(e=e||window.event).target.tagName.toLowerCase()){var a="../api/page.php?page="+(now=e.target.innerText)+"&qty=10&time=new Date()";xhr.open("GET",a,!0),xhr.send(),xhr.onreadystatechange=function(){if(4==xhr.readyState&&200==xhr.status){var e=JSON.parse(xhr.responseText).list;console.log(e);var a="";for($i=0;$i<e.length;$i++)a+='<a href="../html/details.html?'+e[$i].id+'"><li><img src="../'+e[$i].img+'"/><p>'+e[$i].content+"</p><h3>￥"+e[$i].price+"</h3></li></a>";$("#olist").html(a)}};for(var t=0;t<page.children.length;t++)page.children[t].className="";page.children[now-1].className="active"}},prev.onclick=function(){--now<=1&&(now=1),update();var e="../api/page.php?page="+now+"&qty=10&time=new Date()";xhr.open("GET",e,!0),xhr.send(),xhr.onreadystatechange=function(){if(4==xhr.readyState&&200==xhr.status){var e=xhr.responseText;creat(JSON.parse(e));for(var a=0;a<page.children.length;a++)page.children[a].className="";page.children[now-1].className="active"}}},next.onclick=function(){5<=++now&&(now=5),update();var e="../api/page.php?page="+now+"&qty=10&time=new Date()";xhr.open("GET",e,!0),xhr.send(),xhr.onreadystatechange=function(){if(4==xhr.readyState&&200==xhr.status){var e=xhr.responseText;creat(JSON.parse(e));for(var a=0;a<page.children.length;a++)page.children[a].className="";page.children[now-1].className="active"}}},$(".mainhead .bb .up").click(function(){listx($page,$qty,"../api/order_by.php")}),$(".mainhead .bb .down").click(function(){listx($page,$qty,"../api/order_bydesc.php")});