"use strict";function fn(){$.ajax({type:"post",url:"../api/getshuju.php",async:!0,success:function(t){console.log(t)}})}$("#btnright").click(function(){var t=$(this).prev().val();t++,console.log(t),100<=t&&(t=100),$(this).prev().val(t)}),$("#btnleft").click(function(){var t=$(this).next().val();t--,console.log(t),t<=1&&(t=1),$(this).next().val(t)});var url1=document.location.search,gid=url1.split("?")[1];function getgs(){$.ajax({type:"get",url:"../api/select_id.php",async:!0,data:{gid:gid},success:function(t){var i=JSON.parse(t);console.log(i);for(var n="",a="",g=0;g<i.length;g++)n+='<div class="imgdet wrap">\n\t\t\t\t\t\t\t\t\t\t\t<div class="imgpart">\n\t\t\t\t\t\t\t\t\t\t\t\t\x3c!-- 图片展示 --\x3e\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="pic">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<img src="../'+i[g].img+'" alt="">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\x3c!-- 镜片 --\x3e\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="magnify"></div>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\x3c!-- 放大后的图片, 放大后的图片的尺寸要设置为展示图片的倍数（2倍）--\x3e\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="bigpic">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<img src="../'+i[g].img+'" alt="">\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\x3c!-- 左侧图片列表 --\x3e\n\t\t\t\t\t\t\t\t\t\t\t<div class="imglist">\n\t\t\t\t\t\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<li class="active">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<img src="../'+i[g].img+'" alt="">\n\t\t\t\t\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<img src="../img/sj1.jpg" alt="">\n\t\t\t\t\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<img src="../'+i[g].img+'" alt="">\n\t\t\t\t\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<img src="../'+i[g].img+'" alt="">\n\t\t\t\t\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<img src="../'+i[g].img+'" alt="">\n\t\t\t\t\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>',a+='<p class="content">'+i[g].content+'</p>\n\t\t\t\t\t\t\t<P class="price">￥'+i[g].price+"</P>";$(".mainl").html(n),$("#mainmain").html(a)}})}function list1(){$.ajax({type:"get",url:"../api/getshuju.php",async:!0,success:function(t){var i=JSON.parse(t),n="";for($i=28;$i<36;$i++)n+='<li><img src="../'+i[$i].img+'"/><h3>￥'+i[$i].price+"</h3><p>"+i[$i].content+"</p></li>";$(".cardl_hl").html(n)}})}console.log(gid),getgs(),$(".mainl").on("mouseenter","li",function(){$imgsrc=$(this).children("img").attr("src"),$(this).addClass("active").siblings().removeClass("active"),$(".mainl .imgpart .pic img").attr("src",$imgsrc),$(".mainl .imgpart .bigpic img").attr("src",$imgsrc)}),$(".mainl").on("mousemove",".imgpart .pic",function(t){$(".mainl .imgpart .pic .magnify").show(),$(".mainl .imgpart .bigpic").show(),$pagex=t.pageX,$pagey=t.pageY,$pictop=$(".mainl .imgpart .pic").offset().top,$picleft=$(".mainl .imgpart .pic").offset().left,$magnifyw=$(".mainl .imgpart .pic .magnify").width(),$magnifyh=$(".mainl .imgpart .pic .magnify").height(),$magnifytop=$pagey-$pictop-$magnifyh/2,$magnifyleft=$pagex-$picleft-$magnifyw/2,$picw=$(".mainl .imgpart .pic").width()-$magnifyw,$pich=$(".mainl .imgpart .pic").height()-$magnifyh,$magnifytop=$magnifytop<0?0:$magnifytop,$magnifyleft=$magnifyleft<0?0:$magnifyleft,$magnifytop=$magnifytop>$pich?$pich:$magnifytop,$magnifyleft=$magnifyleft>$picw?$picw:$magnifyleft,$(".mainl .imgpart .pic .magnify").css({top:$magnifytop,left:$magnifyleft}),$minl=$(".mainl .imgpart .bigpic").width()-$(".mainl .imgpart .bigpic img").width(),$mint=$(".mainl .imgpart .bigpic").height()-$(".mainl .imgpart .bigpic img").height(),$objimgl=2*-$magnifyleft,$objimgt=2*-$magnifytop,$objimgl=$objimgl<$minl?$minl:$objimgl,$objimgt=$objimgt<$mint?$mint:$objimgt,$(".mainl .imgpart .bigpic img").css({top:$objimgt,left:$objimgl})}),$(".mainl").on("mouseleave",".imgpart .pic",function(t){$(".mainl .imgpart .pic .magnify").hide(),$(".mainl .imgpart .bigpic").hide()}),$(".waitb").click(function(){$.ajax({type:"get",url:"../api/select_id.php",async:!0,data:{gid:gid},success:function(t){var i=JSON.parse(t);console.log(i);var n=i[0].id,a=i[0].price,g=i[0].img,m=i[0].content,c=$("#shu").val();console.log(c),$.ajax({type:"get",url:"../api/insert_cart.php",async:!0,data:{id:n,price:a,img:g,content:m,num:c},success:function(t){console.log(t),confirm("添加成功，是否跳转至购物车")&&(location.href="shopcar.html")}})}})}),list1();